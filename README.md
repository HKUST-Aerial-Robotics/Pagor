<div align="center">
    <img src="docs/pagor.png" alt="pagor">
</div>

## Introduction

This is the official code repository of "Pyramid Semantic Graph-based Global Point Cloud Registration with Low Overlap", which is accepted by IROS'23.

Pagor (PyrAmid Gaph-based GlObal Registration) is a robust global point cloud registration algorithm for LiDAR. It takes two point clouds and their semantic labels as input and estimates the relative pose between them.

<div align="center">
    <img src="./docs/cover.png" width="640" alt="cover">
</div>

## Prerequisites
### ROS
Follow the [official guide](http://wiki.ros.org/ROS/Installation) to install ROS1.
### GTSAM
Follow the [official guide](https://gtsam.org/get_started/) to install GTSAM
### PCL
Follow the [official guide](https://pointclouds.org/downloads/) to install PCL
### Ubuntu packages
```angular2html
sudo apt install cmake libeigen3-dev libboost-all-dev libgoogle-glog-dev libyaml-cpp-dev
```

## Build and Run
```
mkdir -p catkin_ws/src
cd catkin_ws/src
git clone https://github.com/HKUST-Aerial-Robotics/Pagor.git
cd .. && catkin_make
```
If you want to reproduce the KITTI benchmark results of the paper, you can download the [KITTI semantic labels](https://hkustconnect-my.sharepoint.com/:u:/g/personal/zqiaoac_connect_ust_hk/Ebw6JHkgeKBMhOARra0zNz4BxqK44ye5Qli0el-_g7ioiw?e=nrT4Ji), which is 
generated by LiDAR segmentation model [SalsaNext](https://github.com/TiagoCortinhal/SalsaNext.git). Then merge the downloaded folder with the original KITTI odometry LiDAR dataset, and then modify the path in the configuration file `configs/pagor.yaml`.
```angular2html
dataset:
  name: kitti
  dataset_path: "/media/qzj/Document/datasets/KITTI/odometry/data_odometry_velodyne/dataset/sequences"
  split_dir: "data_split/kitti"
  label_dir: "/labels_salsanext/"
```
The dataset folder structure is as follows:
```angular2html
dataset/
└── sequences
    └── 00
        ├── calib.txt
        ├── labels_salsanext
        ├── poses.txt
        ├── times.txt
        └── velodyne
```
Run the following command:
```
source devel/setup.bash
cd src/Pagor
../../devel/lib/pagor/kitti_bm pagor.yaml
```

## Citation
If you find this work useful in your research, please consider citing:
```
@INPROCEEDINGS{qiao_monolam,
  author={Zhijian Qiao, Zehuan Yu, Huan Yin and Shaojie Shen},
  booktitle={2023 IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)}, 
  title={Pyramid Semantic Graph-based Global Point Cloud Registration with Low Overlap}, 
  year={2023},
  volume={},
  number={}}
```

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgements
We want to express our deepest gratitude to the creators of the repositories listed below for sharing their work with the public:
* [Teaser](https://github.com/MIT-SPARK/TEASER-plusplus) (baseline)
* [Quatro](https://github.com/url-kaist/Quatro) (baseline)
* [Segregator](https://github.com/Pamphlett/Segregator) (baseline)
* [CLIPPER](https://github.com/mit-acl/clipper) (maximum clique solver)
* [T-LOAM](https://github.com/zpw6106/tloam) (clustering) 
* [SalsaNext](https://github.com/TiagoCortinhal/SalsaNext.git) (semantic segmentation)
